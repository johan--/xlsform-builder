<%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
  <% email = {
    partial: 'devise/shared/email_field',
    locals: { f: f }
  } %>

  <% post_label = if @minimum_password_length %>
    <% "<em>(#{@minimum_password_length} characters minimum)</em>".html_safe %>
  <% else %>
    <% nil %>
  <% end %>
  <% password = {
    partial: 'devise/shared/password_field', locals: {
      f: f,
      attribute: :password,
      post_label: post_label
    }
  } %>

  <% password_confirmation = {
    partial: 'devise/shared/password_field', locals: {
      f: f,
      attribute: :password_confirmation
    }
  } %>

  <%= render partial: 'devise/shared/sign_in', locals: {
    action: 'Sign up',
    f: f,
    partials: [email, password, password_confirmation]
  } %>
<% end %>
